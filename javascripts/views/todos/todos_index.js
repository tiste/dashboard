(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,o=function(t,o){function n(){this.constructor=t}for(var r in o)e.call(o,r)&&(t[r]=o[r]);return n.prototype=o.prototype,t.prototype=new n,t.__super__=o.prototype,t};App.Views.TodosIndex=function(e){function n(){return this.render=t(this.render,this),this.createOnEnter=t(this.createOnEnter,this),this.clearDone=t(this.clearDone,this),this.addOne=t(this.addOne,this),this.addAll=t(this.addAll,this),n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.template=JST["templates/todos/index"],n.prototype.className="m-todo",n.prototype.initialize=function(){return this.collection.on("reset",this.render,this),this.collection.on("add",this.addOne,this),this.collection.on("all",this.render,this)},n.prototype.events={"keypress .m-todo--new":"createOnEnter","click .m-todo--clear":"clearDone"},n.prototype.addAll=function(){return this.collection.each(this.addOne)},n.prototype.addOne=function(t){var e;return e=new App.Views.Todo({model:t}),this.$(".m-todo--list").append(e.render().el)},n.prototype.clearDone=function(){return _.invoke(this.collection.done(),"destroy")},n.prototype.countDone=function(){var t;return t=this.collection.done().length,0===t?!1:1===t?"Effacer la tâche complétée":"Effacer les "+t+" tâches complétées"},n.prototype.createOnEnter=function(t){return 13===t.keyCode&&this.$(".m-todo--new").val()?(t.preventDefault(),this.collection.create({title:this.$(".m-todo--new").val(),order:this.collection.nextPosition()}),this.$(".m-todo--new").val("")):void 0},n.prototype.render=function(){var t;return $(this.el).html(this.template),this.addAll(),(t=this.countDone())?this.$(".m-todo--clear").text(t):this.$(".m-todo--clear").hide(),this},n}(Backbone.View)}).call(this);