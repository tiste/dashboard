(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,n=function(t,n){function r(){this.constructor=t}for(var i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};App.Views.WeathersIndex=function(e){function r(){return this.render=t(this.render,this),this.refetch=t(this.refetch,this),r.__super__.constructor.apply(this,arguments)}return n(r,e),r.prototype.template=JST["templates/weathers/index"],r.prototype.events={"blur .m-weather--input":"refetch","submit .m-weather form":"refetch"},r.prototype.initialize=function(){return this.collection.on("reset",this.render,this)},r.prototype.refetch=function(t){var e,n;return t.preventDefault(),n=new App.Collections.Weathers,setCity(this.$(".m-weather--input").val()),e=getCity(),$(this.$(".m-weather--item").get().reverse()).each(function(t){return setTimeout(function(t){return function(){return $(t).fadeOut()}}(this),100*t)}),n.fetch({data:{lang:window.App.Settings.get("lang"),lat:e instanceof Object?e.lat:void 0,lon:e instanceof Object?e.lon:void 0,q:e instanceof Object?void 0:e,type:"accurate",units:"metric"},dataType:"jsonp",success:function(t){return function(){return t.collection=n,setCity(n.at(0).get("city")),t.render()}}(this),error:function(t){return function(){return setGeoloc(),t.$(".m-weather").html("<p class='lead text-center opacity'>La météo est vraiment mauvaise et ne veut pas s'afficher, veuillez recharger...</p>")}}(this)})},r.prototype.render=function(){return $(this.el).html(this.template({weathers:this.collection.toJSON()})),this.$(".m-weather--item").hide().each(function(t){return setTimeout(function(t){return function(){return $(t).fadeIn()}}(this),100*t)}),this},r}(Backbone.View)}).call(this);